<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />  
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Mock API Manager</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>

  <div class="container">
    <aside class="left-panel">
      <h1 class="left-title">Mock API Manager</h1>
      <div class="tabs">
        <button class="tab-btn active" data-tab="create">Create Mock</button>
        <button class="tab-btn" data-tab="manage">Manage Mocks</button>
        <button class="tab-btn" data-tab="import">Import</button>
      </div>
    </aside>
    
    <section class="right-panel">
      <!-- CREATE/EDIT MOCK TAB -->
      <div id="createTab" class="tab-content active">
        <h2 id="formTitle">Create New Mock</h2>
        <form id="mockApiForm" novalidate>
          <input type="hidden" id="mockId" value="" />
          
          <label for="businessName">Business Name / Description (Optional)</label>
          <input type="text" id="businessName" placeholder="e.g., Admin User Login" />
          
          <label for="apiName">API Path <span class="required">*</span></label>
          <input type="text" id="apiName" required placeholder="e.g., users/login" />

          <label for="method">HTTP Method</label>
          <select id="method">
            <option value="POST" selected>POST</option>
            <option value="GET">GET</option>
            <option value="PUT">PUT</option>
            <option value="DELETE">DELETE</option>
            <option value="PATCH">PATCH</option>
          </select>

          <label for="predicateRequest">Request Body Matching Criteria (Optional)
            <span style="color: #888; font-size: 13px; display: block;">
              <em>Match requests with specific JSON body content. Leave empty to match any body.</em>
            </span>
          </label>
          <textarea id="predicateRequest" placeholder='e.g., { "userType": "admin" }'></textarea>

          <label for="predicateHeaders">Request Headers Matching Criteria (Optional)
            <span style="color: #888; font-size: 13px; display: block;">
              <em>Match requests with specific headers. Example: { "authorization": "Bearer token" }</em>
            </span>
          </label>
          <textarea id="predicateHeaders" placeholder='e.g., { "authorization": "Bearer token123" }'></textarea>

          <label for="predicateQuery">Query Parameters Matching Criteria (Optional)
            <span style="color: #888; font-size: 13px; display: block;">
              <em>Match requests with specific query params. Example: { "page": "1", "limit": "10" }</em>
            </span>
          </label>
          <textarea id="predicateQuery" placeholder='e.g., { "category": "electronics", "sort": "price" }'></textarea>

          <label for="requestPayload">Request Payload (Optional)
            <span style="color: #888; font-size: 13px; display: block;">
              <em>Fallback body matching if Body Criteria is not provided.</em>
            </span>
          </label>
          <textarea id="requestPayload" placeholder='e.g., { "id": 123 }'></textarea>

          <label for="responseHeaders">Response Headers JSON (Optional)</label>
          <textarea id="responseHeaders" placeholder='e.g., { "x-powered-by": "nodejs" }'></textarea>

          <label for="responseBody">Response Body JSON
            <span style="color: #888; font-size: 13px; display: block;">
              <em>The JSON response to return. Can be empty {} for 204 No Content responses.</em>
            </span>
          </label>
          <textarea id="responseBody" placeholder='e.g., { "status": "success" } or just {}'></textarea>

          <div class="button-group">
            <button type="submit" id="submitBtn">Save Mock</button>
            <button type="button" id="cancelBtn" class="btn-secondary" style="display:none;">Cancel</button>
          </div>
          <div id="message" class="message"></div>
        </form>
      </div>

      <!-- MANAGE MOCKS TAB -->
      <div id="manageTab" class="tab-content">
        <h2>Manage Mocks</h2>
        <div id="mocksList">
          <p class="loading">Loading mocks...</p>
        </div>
      </div>

      <!-- IMPORT TAB -->
      <div id="importTab" class="tab-content">
        <h2>Import Mocks from Excel/CSV</h2>
        
        <div class="import-instructions">
          <p><strong>Supported formats:</strong> .xlsx, .csv</p>
          <p><strong>Required columns</strong> (flexible names accepted):</p>
          <ul>
            <li><strong>Business Name</strong> - Description or name of the API (optional)</li>
            <li><strong>Path/Endpoint</strong> - API path like /users/login</li>
            <li><strong>Request</strong> - Request body JSON (leave empty for any request)</li>
            <li><strong>Response</strong> - Response body JSON</li>
          </ul>
        </div>

        <div class="import-upload">
          <input type="file" id="importFile" accept=".csv,.xlsx,.xls" style="display:none;" />
          <div class="file-drop-zone" id="fileDropZone">
            <p>Drop file here or click to browse</p>
            <button type="button" class="btn-upload" onclick="document.getElementById('importFile').click()">Choose File</button>
          </div>
        </div>

        <div class="import-templates">
          <button type="button" class="btn-template" id="downloadCsvTemplate">Download CSV Template</button>
          <button type="button" class="btn-template" id="downloadXlsxTemplate">Download XLSX Template</button>
        </div>

        <div id="importPreview" class="import-preview" style="display:none;">
          <h3>Preview</h3>
          <div id="importPreviewContent"></div>
          <div class="import-actions">
            <button type="button" id="cancelImport" class="btn-secondary">Cancel</button>
            <button type="button" id="importSelected" class="btn-primary">Import Selected</button>
          </div>
        </div>

        <div id="importMessage" class="message"></div>
      </div>
    </section>
  </div>
<script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
<script src="script.js"></script>
</body>
</html>
